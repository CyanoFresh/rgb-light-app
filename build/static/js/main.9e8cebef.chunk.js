(this["webpackJsonprgb-light-app"]=this["webpackJsonprgb-light-app"]||[]).push([[0],{242:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(28),a=n.n(r),c=n(13),i=n(275),s=n(269),l=n(11),u=n(273),d=n(274),b=n(76),g=n.n(b),h=n(77),j=n(108),p=n(270),v=n(271),f=n(276),m=n(79),O=n(272),x=n(113),w=n.n(x),y=n(279),C=n(244),k=n(277),S={pollInterval:5e3,pollTimeout:1900,kelvin:3e3,colors:["red","rgb(255,32,0)","orangeRed","yellow","lime","springGreen","cyan","Aquamarine","DeepSkyBlue","blue","rgb(127,0,255)","Magenta","rgb(255,0,127)","rgb(255,0,4)"]},N=n(5),I=Object(o.createContext)(),T=function(e){var t=Object(o.useState)({on:!1,color:{r:0,g:0,b:0},batteryLevel:void 0}),n=Object(c.a)(t,2),r=n[0],a=n[1];return Object(N.jsx)(I.Provider,{value:[r,a],children:e.children})},B=Object(s.a)((function(e){return{loadingTitle:{marginTop:e.spacing(3)},paper:{padding:e.spacing(2,3)},paper2:{padding:e.spacing(4,3)},name:{marginBottom:e.spacing(1)},loadingParent:{textAlign:"center",padding:e.spacing(5,0)},chroma:{boxShadow:e.shadows[1]+" !important"}}})),R=function(e){return{r:4*e.rgb.r,g:4*e.rgb.g,b:4*e.rgb.b}},A=function(e){var t=e.split(","),n=Object(c.a)(t,5),o=n[0],r=n[1],a=n[2],i=n[3],s=n[4],l=function(e,t,n){return{r:e/4,g:t/4,b:n/4}}(+r,+a,+i);return{on:Boolean(+o),color:l,batteryLevel:s}};var L=function(e){var t=e.url,n=e.isOnline,r=e.setIsOnline,a=B(),i=Object(o.useState)(S.kelvin),s=Object(c.a)(i,2),l=s[0],u=s[1],d=Object(o.useContext)(I),b=Object(c.a)(d,2),x=b[0],T=b[1],L=function(){var e=Object(j.a)(g.a.mark((function e(){var n,o,a,c,i,s,l=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]&&l[0],o=l.length>1&&void 0!==l[1]?l[1]:"",a=new AbortController,c=a.signal,setTimeout((function(){return a.abort()}),S.pollTimeout),e.prev=5,e.next=8,fetch(t+o,{method:n?"POST":"GET",signal:c});case 8:return i=e.sent,e.next=11,i.text();case 11:s=e.sent,r(!0),T((function(e){return Object(h.a)(Object(h.a)({},e),A(s))})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("Request failed: ",e.t0.message),r(!1);case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e=setInterval(L,5e3);return L(),function(){return clearTimeout(e)}}),[t]);var W=function(e){var t=R(e),n=t.r,o=t.g,r=t.b;return L(!0,"?on=1&r=".concat(n,"&g=").concat(o,"&b=").concat(r))};return n?Object(N.jsxs)(O.a,{container:!0,spacing:2,children:[Object(N.jsx)(O.a,{item:!0,lg:3,sm:6,xs:12,children:Object(N.jsx)(m.a,{width:"100%",className:a.chroma,color:x.color,onChangeComplete:W,styles:{default:{saturation:{touchAction:"none"},controls:{touchAction:"none"}}},disableAlpha:!0})}),Object(N.jsx)(O.a,{item:!0,lg:3,sm:6,xs:12,children:Object(N.jsx)(C.a,{className:a.paper2,children:Object(N.jsx)(m.b,{color:x.color,onChangeComplete:W,width:"100%",circleSize:40,circleSpacing:17,colors:S.colors})})}),Object(N.jsx)(O.a,{item:!0,lg:3,sm:6,xs:12,children:Object(N.jsx)(k.a,{variant:"contained",color:x.on?"default":"primary",size:"large",fullWidth:!0,onClick:function(){var e=R({rgb:x.color}),t=e.r,n=e.g,o=e.b;return L(!0,"?on=".concat(+!x.on,"&r=").concat(t,"&g=").concat(n,"&b=").concat(o))},children:x.on?"Turn Off":"Turn On"})}),Object(N.jsx)(O.a,{item:!0,lg:3,sm:6,xs:12,children:Object(N.jsxs)(C.a,{className:a.paper,children:[Object(N.jsx)(v.a,{id:"kelvin-slider-label",gutterBottom:!0,children:"Color Temperature, K"}),Object(N.jsx)(y.a,{value:l,min:600,max:5e3,defaultValue:3e3,valueLabelDisplay:"auto",getAriaValueText:function(e){return"".concat(e," K")},onChange:function(e,t){return u(t)},onChangeCommitted:function(e,t){var n=w()(t),o=Object(c.a)(n,3),r=o[0],a=o[1],i=o[2];return W({rgb:{r:r,g:a,b:i}})},"aria-labelledby":"kelvin-slider-label"})]})})]}):Object(N.jsxs)("div",{className:a.loadingParent,children:[Object(N.jsx)("div",{children:Object(N.jsx)(p.a,{size:90,thickness:3})}),Object(N.jsxs)(f.a,{children:[Object(N.jsx)(v.a,{variant:"h4",gutterBottom:!0,className:a.loadingTitle,children:"Not Connected"}),Object(N.jsx)(v.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Connect to Wi-Fi RGB Light"})]})]})},W=n(278);var U=n(115),P=n.n(U),E=n(116),G=n.n(E),z=n(117),J=n.n(z),D=Object(s.a)((function(e){return{root:{flexGrow:1,display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},title:{flexGrow:1,fontFamily:"Product Sans",fontWeight:400,whiteSpace:"nowrap",wordBreak:"keep-all",marginRight:e.spacing()},content:{flexGrow:1,minHeight:"100vh",overflow:"auto",padding:e.spacing(1)},menuButton:{marginRight:e.spacing(2)},toolbar:e.mixins.toolbar,search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(l.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(l.b)(e.palette.common.white,.25)},width:"100%"},batteryLevel:{display:"flex",alignItems:"center",padding:e.spacing(1)},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,6),transition:e.transitions.create("width"),width:"100%"},searchIcon:{width:e.spacing(6.5),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}}));function F(e){var t=e.deviceUrl,n=e.onUrlChange,r=e.online,a=D(),i=Object(o.useContext)(I),s=Object(c.a)(i,1)[0];return Object(N.jsx)(u.a,{position:"fixed",className:a.appBar,children:Object(N.jsxs)(d.a,{children:[Object(N.jsxs)("div",{className:a.search,children:[Object(N.jsx)("div",{className:a.searchIcon,children:r?Object(N.jsx)(P.a,{}):Object(N.jsx)(G.a,{})}),Object(N.jsx)(W.a,{placeholder:"Device URL\u2026",classes:{root:a.inputRoot,input:a.inputInput},value:t,onChange:n})]}),Boolean(s.batteryLevel)&&Object(N.jsxs)("div",{className:a.batteryLevel,children:[Object(N.jsx)(J.a,{}),s.batteryLevel,"%"]})]})})}var q=function(){var e=D(),t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],a=n[1],s=function(e,t){var n=Object(o.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(o){return console.log(o),t}})),r=Object(c.a)(n,2),a=r[0],i=r[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(o){console.log(o)}}]}("device_url","http://192.168.4.1/"),l=Object(c.a)(s,2),u=l[0],d=l[1];return Object(N.jsxs)(T,{children:[Object(N.jsx)(i.a,{}),Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(F,{online:r,deviceUrl:u,onUrlChange:function(e){return d(e.target.value)}}),Object(N.jsxs)("main",{className:e.content,children:[Object(N.jsx)("div",{className:e.toolbar}),Object(N.jsx)(L,{url:u,isOnline:r,setIsOnline:a})]})]})]})},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(N.jsx)(q,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");K?(!function(e,t){fetch(e).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):V(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):V(t,e)}))}}()}},[[242,1,2]]]);
//# sourceMappingURL=main.9e8cebef.chunk.js.map